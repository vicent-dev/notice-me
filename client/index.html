<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<button onclick="notifyPost()">Fake notification</button>

<script>
    const PROTOCOL = 'http';
    const SERVER_URL = 'localhost:8080';

    function notifyPost() {
        console.log("notification create")
        const xhr = new XMLHttpRequest();
        console.log("test")
        xhr.open("POST", `${PROTOCOL}://${SERVER_URL}/api/notification`, true);
        xhr.send(null);
    }

    function connectToWs() {
        const conn = new WebSocket("ws://" + SERVER_URL + "/ws");

        conn.onclose = function (e) {
            console.log(e);
        }

        conn.onmessage = function (e) {
            const messages = e.data.split('\n');
            for (let i = 0; i < messages.length; i++) {
                alert(messages[i]);
            }
        }
    }

    connectToWs();
</script>
</body>
</html>